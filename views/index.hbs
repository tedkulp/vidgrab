<section class="section">
  <div class="container">
    <form method="POST" action="/getinfo" onsubmit="changeButton()">
      <div class="field is-grouped">
        <div class="control is-expanded">
          <input class="input is-medium" name="url" placeholder="URL to Download" />
          <p class="help"><a href="/extractors">* List of currently available services</a></p>
        </div>
        <div class="control">
          <button class="button is-primary is-medium" id="form-submit" type="submit">Submit</button>
        </div>
      </div>
    </form>
  </div>
</section>

<section class="section">
  <div class="container">
    <h2 class="subtitle is-4 has-text-centered">Recent Downloads</h2>

    <table class="table is-striped is-hoverable is-fullwidth is-narrow">
      <thead>
        <tr>
          <th>ID</th>
          <th>Status</th>
          <th><abbr title="Service">Svc</abbr></th>
          <th>Title</th>
          <th><abbr title="Percent Downloaded">%</abbr></th>
        </tr>
      </thead>
      {{#each jobs}}
      <tr>
        <td>{{id}}</td>
        <td>{{capitalize state}}</td>
        <td>{{capitalize data.extractor}}</td>
        <td>
          <a href="{{data.url}}" title="{{data.title}}" target="_blank" rel="noopener noreferrer">
            {{data.title}}
          </a>
        </td>
        <td>{{progress}}</td>
      </tr>
      {{/each}}
    </table>
  </div>
</section>

<script>
  function changeButton() {
    var ele = document.getElementById('form-submit');
    if (ele) {
      ele.classList.toggle('is-loading');
    }
  }
</script>